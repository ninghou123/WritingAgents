fetch_profile:
  description: "Load the profile for user '{user_id}'."
  expected_output: "A JSON blob with user profile information."
  agent: profile_manager
  human_input: false

collect_writing_specs:
  description: |
    You are helping the student prepare an essay on "{topic}".
    Ask any clarifying questions (length, audience, tone, paragraph focus)
    **then** summarise their answers in bullet form prefixed with "SPEC:".
  expected_output: "A tidy bullet-list of writing specs starting with 'SPEC:'."
  agent: conversation_guide
  human_input: true

draft_outline:
  description: |
    Using the specs and the student's profile, create a numbered outline.
    Give each paragraph a short hint line.
  expected_output: "An ordered outline and hints."
  agent: outline_planner
  human_input: false

deliver_outline:
  description: "Present the outline and confirm the student is ready to write."
  expected_output: "A friendly confirmation."
  agent: conversation_guide
  human_input: true

evaluate_draft:
  description: |
    The student has submitted a draft essay.
    Score it (0-100) for grammar, clarity, structure, and spec compliance.
    Return **only** a JSON like:
    {% raw %}
    {
      "score": 88,
      "passed": true,
      "issues": ["…", "…"]
    }
    {% endraw %}
    Pass if score >= 80.
  expected_output: "A JSON object exactly in the form above."
  agent: reviewer
  human_input: false

coach_improvements:
  description: |
    The draft needs work. Below are the issues detected by the reviewer.
    Use them to give concrete advice and encourage the student to rewrite
    and resubmit.
  expected_output: "Targeted feedback and rewrite instructions."
  agent: improvement_coach
  context: [evaluate_draft]   # let CrewAI pass the whole JSON
  human_input: true

appraise_progress:
  description: |
    Congratulate the learner on the accepted essay about "{topic}".
    Compare briefly with past work and highlight at least one improvement.
  expected_output: "A short progress report."
  agent: progress_analyst
  human_input: false
